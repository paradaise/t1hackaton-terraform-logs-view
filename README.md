üõ†Ô∏è Terraform Logs Viewer
=========================

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ Terraform –ª–æ–≥–æ–≤. –ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ `backend` –Ω–∞ Go –∏ `frontend` –Ω–∞ Vite/React + Tailwind. –ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –≤ Docker –∏ –ª–æ–∫–∞–ª—å–Ω–æ.

- **Backend**: Go + chi, in-memory repo
- **Frontend**: Vite + React + Tailwind
- **API**: OpenAPI –≤ `swagger.yaml`

–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
----------
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–°—Ö–µ–º–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö](#—Å—Ö–µ–º–∞-–ø–æ—Ç–æ–∫–æ–≤-–¥–∞–Ω–Ω—ã—Ö)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –≤ Docker](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç-–≤-docker)
- [–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker](#–ª–æ–∫–∞–ª—å–Ω—ã–π-–∑–∞–ø—É—Å–∫-–±–µ–∑-docker)
- [API / Swagger](#api--swagger)
- [–°—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞](#—Å—Ç—Ä–∞–Ω–∏—Ü—ã-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
- [–ü—Ä–∏–º–µ—Ä—ã –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã](#–ø—Ä–∏–º–µ—Ä—ã-–∏-—Å–∫—Ä–∏–Ω—à–æ—Ç—ã)
- [–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤](#—Ñ–æ—Ä–º–∞—Ç-–ª–æ–≥–æ–≤)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–∏-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [FAQ](#faq)

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
-----------

- üì§ **–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤** –≤ —Ñ–æ—Ä–º–∞—Ç–µ NDJSON/line-delimited JSON —á–µ—Ä–µ–∑ `/upload`
- üîé **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫**: –ø–æ `tf_resource_type`, –≤—Ä–µ–º–µ–Ω–∏, `level`, full-text `search`
- üß≠ **–¢–∞–π–º–ª–∞–π–Ω** –ø–æ `tf_req_id` (—Å—Ç–∞—Ä—Ç/–∫–æ–Ω–µ—Ü/—Å—Ç–∞—Ç—É—Å)
- üìä **–ú–µ—Ç—Ä–∏–∫–∏** –æ—à–∏–±–æ–∫/–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- ‚úÖ **–ü–æ–º–µ—Ç–∫–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º** –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ `tf_req_id`
- ‚¨áÔ∏è **–≠–∫—Å–ø–æ—Ä—Ç** –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤ (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ JSON) –∏ –∑–∞–¥–µ–ª –Ω–∞ Telegram

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
-----------

```mermaid
flowchart LR
  subgraph Client
    UI[React UI]
  end

  subgraph Backend[Go Backend]
    R[Router / chi]
    S[In-memory Store]
  end

  UI -- HTTP/JSON --> R
  R -- read/write --> S

  FS[(NDJSON Files)] -- upload --> R
```

–°—Ö–µ–º–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
---------------------

```mermaid
sequenceDiagram
  participant User
  participant UI as Frontend
  participant API as Backend API
  participant Store as In-memory Store

  User->>UI: Select file and click Upload
  UI->>API: POST /upload (multipart/form-data)
  API->>Store: Parse, repair broken JSON lines, index by id
  API-->>UI: 200 { id, status }
  UI->>API: GET /logs?filters
  API->>Store: Apply filters, sort, paginate
  API-->>UI: 200 [Log]
  UI->>API: GET /timeline, GET /metrics
  API-->>UI: 200 Timeline, Metrics
```

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –≤ Docker
----------------------

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: Docker, Docker Compose.

```bash
docker compose up --build
```

- Backend: `http://localhost:8080`
- Frontend (Vite dev): `http://localhost:5173`

–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker
---------------------------

1) Backend (Go 1.22+):

```bash
cd backend
go mod download
go run ./
# —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –∞–¥—Ä–µ—Å –∏–∑ backend/appconfig.yml (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.0.0.0:8080)
```

2) Frontend (Node 20+):

```bash
cd frontend
npm install
npm run dev -- --host 0.0.0.0
# Vite dev server: http://localhost:5173
```

API / Swagger
-------------

- –§–∞–π–ª —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏: `swagger.yaml`
- –ë–∞–∑–æ–≤—ã–π URL: `http://localhost:8080`

–ö–ª—é—á–µ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                | –û–ø–∏—Å–∞–Ω–∏–µ                                 |
|-------|---------------------|------------------------------------------|
| POST  | `/upload`           | –ó–∞–≥—Ä—É–∑–∫–∞ NDJSON –ª–æ–≥–æ–≤ (multipart form)   |
| GET   | `/logs`             | –õ–∏—Å—Ç–∏–Ω–≥ –ª–æ–≥–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π   |
| GET   | `/logs/{id}`        | –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–æ–≥–∞ –ø–æ `id`       |
| POST  | `/logs/mark-read`   | –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ `read` –ø–æ —Å–ø–∏—Å–∫—É `id` |
| GET   | `/groups/{tf_req_id}` | –ì—Ä—É–ø–ø–∞ –ª–æ–≥–æ–≤ –ø–æ `tf_req_id`            |
| GET   | `/timeline`         | –¢–∞–π–º–ª–∞–π–Ω –ø–æ `tf_req_id`                  |
| GET   | `/metrics`          | –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏                   |
| POST  | `/export/download`  | –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤ (JSON)     |
| POST  | `/export/telegram`  | –≠–∫—Å–ø–æ—Ä—Ç –≤ Telegram (–∑–∞–≥–æ—Ç–æ–≤–∫–∞)           |
| GET   | `/corrupted-logs`   | –°—ã—Ä—ã–µ –∏—Å–ø–æ—Ä—á–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–≥–æ–≤           |

–°—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
-------------------

- **Upload**: –∑–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤, —Å—Ç–∞—Ç—É—Å—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **Logs**: —Ñ–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫, —Ç–∞–±–ª–∏—Ü–∞ –ª–æ–≥–æ–≤, –æ—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ—Å—Ç–∏
- **Detail**: –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–æ–≥–∞
- **Group**: –ª–æ–≥–∏ –ø–æ `tf_req_id`
- **Timeline**: –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
- **Analytics**: –º–µ—Ç—Ä–∏–∫–∏ –æ—à–∏–±–æ–∫/–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- **Dashboard**: –æ–±–∑–æ—Ä –∏ –±—ã—Å—Ç—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

–ü—Ä–∏–º–µ—Ä—ã –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã
-------------------

–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã UI –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

| –≠–∫—Ä–∞–Ω | –°–∫—Ä–∏–Ω—à–æ—Ç |
|-------|----------|
| –ó–∞–≥—Ä—É–∑–∫–∞ | <–≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É> |
| –õ–æ–≥–∏ | <–≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É> |
| –î–µ—Ç–∞–ª–∏ | <–≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É> |
| –¢–∞–π–º–ª–∞–π–Ω | <–≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É> |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | <–≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É> |

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏:

```bash
curl -F "file=@Terraform\ Logs\ Example/4.tflog.json" http://localhost:8080/upload
```

–ü—Ä–∏–º–µ—Ä —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ª–æ–≥–æ–≤:

```bash
curl "http://localhost:8080/logs?level=error&tf_resource_type=aws_s3_bucket&search=timeout&page=1&limit=50"
```

–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
------------

- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è NDJSON (–æ–¥–Ω–∞ JSON-–∑–∞–ø–∏—Å—å –Ω–∞ —Å—Ç—Ä–æ–∫—É).
- –ò—Å–ø–æ—Ä—á–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø—ã—Ç–∞–µ–º—Å—è —á–∏–Ω–∏—Ç—å —Å –ø–æ–º–æ—â—å—é `jsonrepair`; —Ñ–ª–∞–≥ `repaired=true` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ.

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä NDJSON:

```json
{"@timestamp":"2025-01-01T10:00:00.000000+00:00","tf_req_id":"req-1","tf_resource_type":"aws_s3_bucket","@level":"info","@message":"create"}
{"@timestamp":"2025-01-01T10:00:01.000000+00:00","tf_req_id":"req-1","diagnostic_severity":"warning","@message":"retry"}
```

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
-------------------------

- Backend –∞–¥—Ä–µ—Å: `backend/appconfig.yml` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.0.0.0:8080`)
- CORS: —Ä–∞–∑—Ä–µ—à–µ–Ω—ã `http://localhost:5173`, `http://127.0.0.1:5173`
- –•—Ä–∞–Ω–µ–Ω–∏–µ: in-memory (–¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ)

FAQ
---

- ‚ùì –ß—Ç–æ —Å Telegram —ç–∫—Å–ø–æ—Ä—Ç–æ–º?
  - –°–µ–π—á–∞—Å –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `501` (unimplemented) –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –ú–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞/—Ç–æ–∫–µ–Ω –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É.
- ‚ùì –ö–∞–∫ –ø–æ–º–µ–Ω—è—Ç—å –ø–æ—Ä—Ç –±—ç–∫–µ–Ω–¥–∞?
  - –ò–∑–º–µ–Ω–∏—Ç–µ `addr` –≤ `backend/appconfig.yml`, –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `go run`.

